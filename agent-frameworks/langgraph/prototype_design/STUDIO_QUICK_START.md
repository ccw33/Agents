# 🚀 LangGraph Studio 快速开始指南

## 📋 前置条件

1. **安装LangGraph CLI**
   ```bash
   pip install langgraph-cli
   ```

2. **配置环境变量**
   ```bash
   # 复制配置文件
   cp .env.example .env
   
   # 编辑.env文件，填入您的API密钥
   # 必填：DASHSCOPE_API_KEY
   # 可选：LANGSMITH_API_KEY
   ```

3. **安装依赖**
   ```bash
   pip install -r requirements.txt
   playwright install
   ```

## 🎯 快速启动

### 方法1：使用启动脚本（推荐）

**Linux/Mac:**
```bash
./start_studio.sh
```

**Windows:**
```cmd
start_studio.bat
```

### 方法2：手动启动

```bash
langgraph dev --port 2024
```

## 🌐 访问地址

启动成功后，您将看到：

- **🚀 API服务器**: http://127.0.0.1:2024
- **🎨 Studio界面**: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024
- **📚 API文档**: http://127.0.0.1:2024/docs

## 🎨 使用LangGraph Studio

### 1. 打开Studio界面
点击上面的Studio界面链接，或者在浏览器中访问：
```
https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024
```

### 2. 选择图形
在左侧面板中选择 `prototype_design` 图形

### 3. 输入需求
在输入面板中，**只需要填写 Requirements 字段**，其他字段都有默认值：

**示例需求：**
```
创建一个现代化的电商产品页面，包含：
1. 产品图片展示区域
2. 产品标题和价格
3. 产品描述
4. 规格选择（颜色、尺寸）
5. 数量选择器
6. 加入购物车按钮
7. 立即购买按钮
```

### 4. 运行工作流
点击 **Submit** 按钮开始执行

### 5. 观察执行过程
在图形视图中实时观察：
- 🎨 **Designer Agent**: 生成HTML/CSS/JS代码
- 🖼️ **Validator Agent**: 多模态验证（截图+AI分析）
- 🔄 **条件分支**: 决定是否需要重新设计
- ✅ **Finalize**: 生成最终文件并启动服务器

## 🆕 多模态验证功能

### 验证流程
1. **自动截图**: 在浏览器中渲染页面并截图
2. **AI分析**: 使用qwen-vl-plus多模态模型分析截图
3. **多维度评估**:
   - 视觉设计（布局、颜色、美观度）
   - 功能完整性（从截图识别功能元素）
   - 用户体验（界面清晰度、交互设计）
   - 响应式设计（页面布局适配）
   - 内容完整性（必要元素存在性）

### 验证标准
- ✅ **APPROVED**: 功能基本完整且界面可用
- ❌ **REJECTED**: 功能严重缺失或界面不可用

## 💡 使用技巧

### 需求描述最佳实践
- **具体明确**: 详细描述功能需求
- **包含样式**: 说明设计风格偏好
- **响应式**: 提及是否需要移动端适配
- **交互性**: 说明需要的交互功能

### 示例需求模板
```
创建一个[页面类型]，要求：
- 使用[设计风格]主题
- 包含[功能列表]
- [布局要求]
- 响应式设计
- [特殊要求]
```

## 🔧 调试功能

### 断点调试
- 在任意节点设置断点
- 检查中间状态
- 逐步执行工作流

### 状态监控
- 查看每个步骤的输入输出
- 监控状态变化
- 分析执行路径

## 📊 输出结果

成功执行后，您将获得：
1. **完整代码**: HTML、CSS、JavaScript
2. **原型URL**: 可访问的预览地址
3. **验证报告**: AI多模态分析结果
4. **执行日志**: 详细的执行过程

## 🛠️ 故障排除

### 常见问题

1. **连接失败**
   - 确保LangGraph服务器正在运行
   - 检查端口2024是否可用

2. **API错误**
   - 检查.env配置
   - 确认DASHSCOPE_API_KEY有效

3. **验证失败**
   - 检查playwright是否正确安装
   - 确认浏览器依赖完整

### 重启服务器
```bash
# 停止当前服务器 (Ctrl+C)
# 重新启动
langgraph dev --port 2024
```

## 🎉 开始体验

现在您可以享受可视化的AI原型设计体验：
- 🎨 实时观察AI设计过程
- 🖼️ 多模态验证确保质量
- 🔄 智能迭代优化
- 📱 响应式设计支持

祝您使用愉快！🚀
